(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{125:function(e,t){},139:function(e,t,a){},140:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(29),s=a.n(l),o=(a(79),a(3)),c=a(4),i=a(6),u=a(5),m=a(7),d=a(15),p=a(23),h=a(34),f=a.n(h),g=a(8),E=a.n(g),b=function(e){e?E.a.defaults.headers.common.Authorization=e:delete E.a.defaults.headers.common.Authorization},v="https://musiqu-backend.herokuapp.com",y=function(){return function(e){localStorage.removeItem("jwtToken"),b(!1),e(x({}))}},N=function(e){return function(t){E.a.put(v+"/api/users/update",e).catch(function(e){console.log("err:",e)}),t(x(e))}},x=function(e){return{type:"SET_CURRENT_USER",payload:e}},k=a(1),w=a(22),O=a(68),j=a(17),S=a(24),C=a.n(S),_={isAuthenticated:!1,user:{},loading:!1},U={},R={song:{},master:{},playlist:{},current_users:[],queue:[],room_code:"",is_playing:!1,progress_ms:0},T=Object(w.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(j.a)({},e,{isAuthenticated:!C()(t.payload),user:t.payload});case"USER_LOADING":return Object(j.a)({},e,{loading:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}},room:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_ROOM":return Object(j.a)({},e,t.payload);case"UPDATE_SONG":return Object(j.a)({},e,{song:t.payload});case"UPDATE_MASTER":return Object(j.a)({},e,{master:t.payload});case"UPDATE_QUEUE":case"QUEUE_SONG":return Object(j.a)({},e,{queue:t.payload});case"UPDATE_STATUS":return Object(j.a)({},e,{is_playing:t.payload});default:return e}}}),D=[O.a],A=Object(w.e)(T,{},Object(w.d)(w.a.apply(void 0,D))),q=function(e){var t=e.children.map(function(e){return"Log out"===e.title?r.a.createElement("li",{key:e.title,className:"mx-2"},r.a.createElement("span",{onClick:e.func,className:"nav-item lead"},e.title)):r.a.createElement("li",{key:e.title,className:"mx-2"},r.a.createElement(d.b,{to:e.link,className:"nav-item lead"},e.title))});return r.a.createElement("nav",{className:"navbar navbar-expand-lg bg-red"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement(d.b,{to:"/",className:"navbar-brand"},r.a.createElement("img",{src:"https://via.placeholder.com/30x30",className:"d-inline-block align-top mx-2",width:"30",height:"30",alt:""}),r.a.createElement("span",{className:"text-white lead"},"MusiqU")),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav ml-auto"},t))))},P=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"col-lg-3"},r.a.createElement("h1",null,"friends section"))}}]),t}(r.a.Component),L=a(16),M=a.n(L),Q=a(25),W=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).createRoom=Object(Q.a)(M.a.mark(function e(){var t,n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post(v+"/api/rooms/create",a.props.user);case 2:t=e.sent,n=t.data,a.setState({code:n});case 5:case"end":return e.stop()}},e)})),a.joinRoom=function(){var e=prompt("Enter the room code").toUppercase();a.setState({code:e})},a.handleConnect=Object(Q.a)(M.a.mark(function e(){var t,a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post(v+"/api/spotify/connect",{withCredentials:!0});case 2:t=e.sent,a=t.data,window.location.href=a;case 5:case"end":return e.stop()}},e)})),a.state={code:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.user;return""!==this.state.code?r.a.createElement(p.a,{to:"/room/"+this.state.code}):r.a.createElement("div",{className:"col-lg-6 my-auto"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("img",{src:e.imgURL,width:250,height:250,className:"rounded d-block mx-auto my-3",alt:"Profile"}),r.a.createElement("h1",{className:"heading text-center my-3 lead text-red"},"Welcome, ",e.username,"!")),r.a.createElement("div",{className:"col-lg-4 mx-auto text-center"},r.a.createElement("button",{className:"btn dashboard-button d-inline-block",onClick:this.createRoom},"Create a room")),r.a.createElement("div",{className:"col-lg-4 mx-auto text-center"},r.a.createElement("button",{className:"btn dashboard-button d-inline-block",onClick:this.joinRoom},"Join a room")),r.a.createElement("div",{className:"col-lg-4 mx-auto text-center"},r.a.createElement("button",{className:"btn dashboard-button d-inline-block",onClick:this.handleConnect},"Connect to Spotify"))))}}]),t}(r.a.Component),G=Object(p.f)(Object(k.b)(function(e){return{user:e.auth.user}})(W)),I=function(e){return r.a.createElement("div",{className:"col-lg-3"},r.a.createElement("h1",null,"help"))},F=Object(k.b)(function(e){return{auth:e.auth}},{logoutUser:y})(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(q,{children:[{title:"Dashboard",link:"/dashboard"},{title:"Profile",link:"/profile"},{title:"Log out",func:e.logoutUser}]}),r.a.createElement("section",{className:"bg-purple",style:{height:"92vh"}},r.a.createElement("div",{className:"container-fluid h-100"},r.a.createElement("div",{className:"row h-100"},r.a.createElement(P,null),r.a.createElement(G,null),r.a.createElement(I,null)))))}),J=a(21),z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(J.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t={email:a.state.email,password:a.state.password};a.props.loginUser(t)},a.state={email:"",password:"",errors:{}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement(r.a.Fragment,null,r.a.createElement(q,{children:[{title:"Login",link:"/"},{title:"Sign up",link:"/signup"}]}),r.a.createElement("section",{className:"bg-purple",style:{height:"92vh"}},r.a.createElement("div",{className:"container h-100"},r.a.createElement("div",{className:"row h-100"},r.a.createElement("div",{className:"col-lg-6 bg-red my-auto mx-auto p-4"},r.a.createElement("h1",{className:"text-white text-center heading lead"},"Login"),r.a.createElement("hr",{className:"divider"}),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-white lead"},r.a.createElement("i",null,"Email address")),r.a.createElement("input",{value:this.state.email,onChange:this.handleChange,id:"email",type:"email",className:"form-control text-white bg-purple custom-form-control","aria-describedby":"emailHelp"}),e.email?r.a.createElement("span",{className:"text-purple lead"},e.email):null),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-white lead"},r.a.createElement("i",null,"Password")),r.a.createElement("input",{value:this.state.password,onChange:this.handleChange,id:"password",type:"text",className:"form-control text-white bg-purple custom-form-control"}),e.password?r.a.createElement("span",{className:"text-purple lead"},e.password):null),r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{onClick:this.handleSubmit,className:"btn bg-purple d-inline-block text-white"},r.a.createElement("span",{className:"lead"},"Login")))))))))}}]),t}(r.a.Component),B=Object(k.b)(function(e){return{auth:e.auth,errors:e.errors}},{loginUser:function(e){return function(t){E.a.post(v+"/api/users/login",e).then(function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),b(a);var n=f()(a);t(x(n))}).catch(function(e){t({type:"GET_ERRORS",payload:e.response.data})})}}})(z),H=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(J.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t={username:a.state.username.toLowerCase(),email:a.state.email.toLowerCase(),password:a.state.password,password2:a.state.password2};a.props.signupUser(t,a.props.history)},a.state={username:"",email:"",password:"",password2:"",errors:{}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement(r.a.Fragment,null,r.a.createElement(q,{children:[{title:"Login",link:"/"},{title:"Sign up",link:"/signup"}]}),r.a.createElement("section",{className:"bg-purple",style:{padding:"7.5vh 0px"}},r.a.createElement("div",{className:"container h-100"},r.a.createElement("div",{className:"row h-100"},r.a.createElement("div",{className:"col-lg-6 bg-red my-auto mx-auto p-4"},r.a.createElement("h1",{className:"text-white text-center heading lead"},"Sign up"),r.a.createElement("hr",{className:"divider"}),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-white lead"},r.a.createElement("i",null,"Username")),r.a.createElement("input",{value:this.state.username,onChange:this.handleChange,id:"username",className:"form-control text-white bg-purple custom-form-control","aria-describedby":"emailHelp"}),e.username?r.a.createElement("span",{className:"text-purple lead"},e.username):null),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-white lead"},r.a.createElement("i",null,"Email address")),r.a.createElement("input",{value:this.state.email,onChange:this.handleChange,id:"email",type:"email",className:"form-control text-white bg-purple custom-form-control","aria-describedby":"emailHelp"}),e.email?r.a.createElement("span",{className:"text-purple lead"},e.email):null),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-white lead"},r.a.createElement("i",null,"Password")),r.a.createElement("input",{value:this.state.password,onChange:this.handleChange,id:"password",type:"text",className:"form-control text-white bg-purple custom-form-control"}),e.password?r.a.createElement("span",{className:"text-purple lead"},e.password):null),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-white lead"},r.a.createElement("i",null,"Confirm password")),r.a.createElement("input",{value:this.state.password2,onChange:this.handleChange,id:"password2",type:"text",className:"form-control text-white bg-purple custom-form-control"}),e.password2?r.a.createElement("span",{className:"text-purple lead"},e.password2):null),r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{onClick:this.handleSubmit,className:"btn bg-purple d-inline-block text-white"},r.a.createElement("span",{className:"lead"},"Sign up")))))))))}}]),t}(r.a.Component),$=Object(k.b)(function(e){return{auth:e.auth,errors:e.errors}},{signupUser:function(e,t){return function(a){E.a.post(v+"/api/users/signup",e).then(function(e){t.push("/")}).catch(function(e){a({type:"GET_ERRORS",payload:e.response.data})})}}})(Object(p.f)(H)),K=a(70),V=a.n(K),X=function(e){return r.a.createElement("section",{style:{height:"100vh"},className:"bg-purple"},r.a.createElement("div",{className:"container h-100"},r.a.createElement("div",{className:"row h-100"},r.a.createElement("div",{className:"col-lg-12 my-auto text-center"},r.a.createElement("img",{src:V.a,className:"loading d-block mx-auto",alt:"loading_symbol"}),r.a.createElement("h1",{className:"display-4 text-red"},"Loading...")))))},Y=Object(k.b)(function(e){return{room_code:e.room.room_code}})(function(e){return r.a.createElement("div",{className:"justify-content-start"},r.a.createElement("p",{className:"lead text-center my-0 text-white",style:{fontWeight:5,fontSize:"1.25em"}},"ROOM CODE:"),r.a.createElement("hr",{className:"divider my-2"}),r.a.createElement("h1",{className:"text-center display-4 text-white room-code"},e.room_code))}),Z=a(20),ee=a.n(Z),te=(a(28),function(e){return r.a.createElement("div",{className:"col-lg-12 song-container py-2 px-1",onClick:function(){return e.handleQueue(e.data)}},r.a.createElement("img",{src:e.data.album_pic_url,width:100,height:100,className:"container-img rounded img mx-2",alt:"Album"}),r.a.createElement("div",{className:"info-container mx-2"},r.a.createElement(ee.a,{className:"lead info my-0",text:e.data.title}),r.a.createElement(ee.a,{className:"lead info my-0",text:e.data.artist})))}),ae=function(e){return function(t){t({type:"UPDATE_QUEUE",payload:e})}},ne=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(J.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){if(e.preventDefault(),""!==a.state.search_field)if(Math.floor(Date.now()/1e3)-a.props.user.spotify_exp>=3300)E.a.post(v+"/api/spotify/refresh",a.props.user).then(function(e){var t=e.data;a.props.updateUser(t);var n={user:t,q:a.state.search_field};E.a.post(v+"/api/spotify/search",n).then(function(e){var t=e.data.tracks.map(function(e){return r.a.createElement(te,{key:e.uri,data:e,handleQueue:a.handleQueue})});a.setState({tracks:t})})});else{var t={user:a.props.user,q:a.state.search_field};E.a.post(v+"/api/spotify/search",t).then(function(e){var t=e.data.tracks.map(function(e){return r.a.createElement(te,{key:e.uri,data:e,handleQueue:a.handleQueue})});a.setState({tracks:t})}).catch(function(e){console.log(e)})}else console.log("bad")},a.handleQueue=function(e){e.queued_by=a.props.user.username,a.props.socket.emit("queue-song",e)},a.state={search_field:"",tracks:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.socket.on("queue-success",function(t){e.props.updateQueue(t)})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{value:this.state.search_field,onChange:this.handleChange,placeholder:"Song title",onFocus:function(e){return e.target.placeholder=""},onBlur:function(e){return e.target.placeholder="Song title"},autoComplete:"off",id:"search_field",type:"text",className:"form-control text-purple","aria-describedby":"queueInput"})),r.a.createElement("div",{className:"tracks-container my-1"},this.state.tracks))}}]),t}(r.a.Component),re=Object(k.b)(function(e){return{user:e.auth.user,room_code:e.room.room_code,queue:e.room.queue}},{updateUser:N,updateQueue:ae})(ne),le=function(e){return r.a.createElement("div",{className:"col-lg-12 song-container p-2"},r.a.createElement("img",{src:e.data.album_pic_url,width:75,height:75,className:"container-img rounded img mx-2",alt:"Album"}),r.a.createElement("div",{className:"info-container mx-2"},r.a.createElement(ee.a,{className:"lead info my-0",text:e.data.title}),r.a.createElement(ee.a,{className:"lead info my-0",text:e.data.artist})))},se=Object(k.b)(function(e){return{queue:e.room.queue}})(function(e){var t=0,a=e.queue.map(function(e){return t++,r.a.createElement(le,{key:e.uri+t,data:e})});return r.a.createElement("div",{className:"d-flex queue-container flex-column"},r.a.createElement("div",null,r.a.createElement("h1",{className:"text-left text-red heading lead"},"Queue")),r.a.createElement("div",{className:"queue-song-container my-1"},a))}),oe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).play=function(){a.props.socket.emit("play")},a.pause=function(){a.props.socket.emit("pause")},a.resume=function(){a.props.socket.emit("resume")},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.socket.on("update-status",function(t){e.props.updateStatus(t)}),this.props.socket.on("update-song",function(t){e.props.updateSong(t),setTimeout(function(){return e.props.socket.emit("request-song-update")},t.length+1)}),this.props.socket.on("update-queue",function(t){e.props.updateQueue(t)})}},{key:"render",value:function(){return C()(this.props.song)&&0===this.props.queue.length?r.a.createElement("div",{className:"d-flex flex-fill justify-content-center align-items-center"},r.a.createElement("h1",{className:"heading text-red text-center lead"},"The queue is empty!")):C()(this.props.song)?r.a.createElement("div",{className:"d-flex flex-fill justify-content-center align-items-center"},r.a.createElement("h1",{className:"heading text-red text-center lead"},"Press play to get started!"),r.a.createElement("i",{className:"text-red fa-3x far fa-play-circle",onClick:this.play})):r.a.createElement("div",{className:"flex-fill"},r.a.createElement("h1",{className:"heading text-red text-center lead"},"Currently playing:"),r.a.createElement("div",{className:"my-3 text-center"},r.a.createElement("img",{src:this.props.song.album_pic_url,width:250,height:250,className:"d-block container-img rounded img mx-auto",alt:"Album"}),r.a.createElement(ee.a,{className:"lead text-red text-center heading",text:this.props.song.title}),r.a.createElement(ee.a,{className:"lead text-red text-center heading",text:this.props.song.artist}),this.props.is_playing?r.a.createElement("i",{className:"text-red fa-3x far fa-pause-circle",onClick:this.pause}):r.a.createElement("i",{className:"text-red fa-3x far fa-play-circle",onClick:this.resume})))}}]),t}(r.a.Component),ce=Object(k.b)(function(e){return{song:e.room.song,is_playing:e.room.is_playing,queue:e.room.queue}},{updateStatus:function(e){return function(t){t({type:"UPDATE_STATUS",payload:e})}},updateSong:function(e){return function(t){t({type:"UPDATE_SONG",payload:e})}},updateQueue:ae})(oe),ie=function(e){return r.a.createElement("div",{className:"user-container my-2"},r.a.createElement("div",null,r.a.createElement("p",{className:"lead text-red my-0 info"},e.user.username),e.master?r.a.createElement("p",{className:"lead text-red my-0 info"},r.a.createElement("i",null,"Music Master")):null),r.a.createElement("img",{src:e.user.imgURL,width:64,height:64,className:"container-img rounded img mx-2",alt:"Profile"}))},ue=Object(k.b)(function(e){return{users:e.room.current_users}})(function(e){var t=e.users.map(function(t){return t.username===e.master?r.a.createElement(ie,{key:t.username,user:t,master:!0}):r.a.createElement(ie,{key:t.username,user:t,master:!1})});return r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("p",{className:"lead text-center my-0 text-white",style:{fontWeight:5,fontSize:"1.5em"}},"Current listeners:"),r.a.createElement("hr",{className:"divider my-2"}),t)}),me=a(71),de=a.n(me),pe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleJoin=Object(Q.a)(M.a.mark(function e(){var t,n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=de()(v),n=a.props.match.params.room_code,t.emit("join-room",a.props.user,n),t.on("join-success",function(e){a.props.updateUser(e),a.setState({loading:!1,socket:t})}),t.on("join-error",function(){console.log("Error joining the room"),a.setState({loading:!1,error:!0})});case 5:case"end":return e.stop()}},e)})),a.state={loading:!0,socket:{},error:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.handleJoin()}},{key:"componentWillUnmount",value:function(){C()(this.state.socket)||this.state.socket.disconnect()}},{key:"render",value:function(){var e=this;return this.state.loading?r.a.createElement(X,null):this.state.error?r.a.createElement("section",{className:"bg-purple",style:{height:"100vh"}},r.a.createElement("div",{className:"container-fluid h-100"},r.a.createElement("div",{className:"row h-100"},r.a.createElement("div",{className:"col-lg-12 my-auto text-center"},r.a.createElement("h1",{className:"display-4 lead text-red my-4"},"Room not found"),r.a.createElement(d.b,{to:"/dashboard",className:"btn dashboard-button d-inline-block"},"Back to Dashboard"))))):(this.state.socket.on("update-room",function(t){e.props.updateRoom(t)}),r.a.createElement(r.a.Fragment,null,r.a.createElement(q,{children:[{title:"Dashboard",link:"/dashboard"},{title:"Profile",link:"/profile"},{title:"Log out",func:this.props.logoutUser}]}),r.a.createElement("section",{className:"bg-purple",style:{height:"92vh"}},r.a.createElement("div",{className:"container-fluid d-flex flex-row py-3 h-100"},r.a.createElement("div",{className:"col-lg-4 d-flex flex-column h-100"},r.a.createElement(re,{socket:this.state.socket})),r.a.createElement("div",{className:"col-lg-4 d-flex flex-column h-100"},r.a.createElement(Y,null),r.a.createElement(ce,{socket:this.state.socket})),r.a.createElement("div",{className:"col-lg-4 d-flex flex-column h-100"},r.a.createElement(ue,null),this.props.room.queue.length>0?r.a.createElement(se,null):null)))))}}]),t}(r.a.Component),he=Object(k.b)(function(e){return{user:e.auth.user,room:e.room}},{logoutUser:y,updateUser:N,updateRoom:function(e){return function(t){t({type:"UPDATE_ROOM",payload:e})}}})(pe),fe=a(72),ge=a.n(fe),Ee=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleAPI=Object(Q.a)(M.a.mark(function e(){var t,n,r,l,s,o;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.auth.user,n=ge.a.parse(a.props.location.search),r={code:n.code,state:n.state,user:t},e.next=5,E.a.post(v+"/api/spotify/callback",r);case 5:l=e.sent,s=l.data,o=s.updated_user,a.props.updateUser(o),a.setState({loading:!1});case 10:case"end":return e.stop()}},e)})),a.state={loading:!0},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.handleAPI()}},{key:"render",value:function(){return this.state.loading?r.a.createElement(X,null):r.a.createElement(p.a,{to:"/dashboard"})}}]),t}(r.a.Component),be={Dashboard:F,Login:B,Signup:$,Room:he,Spotify:Object(k.b)(function(e){return{auth:e.auth}},{updateUser:N})(Ee),Temp:Object(k.b)(function(e){return{user:e.auth.user}})(function(e){return r.a.createElement("section",{className:"bg-purple",style:{height:"92vh"}},r.a.createElement("div",{className:"container-fluid py-3 h-100"},r.a.createElement("div",{className:"row h-100"},r.a.createElement(se,null))))})},ve=a(73),ye=Object(k.b)(function(e){return{auth:e.auth}})(function(e){var t=e.component,a=e.auth,n=Object(ve.a)(e,["component","auth"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(p.a,{to:"/"})}}))});a(139);if(localStorage.jwtToken){var Ne=localStorage.jwtToken;b(Ne);var xe=f()(Ne),ke=Date.now()/1e3;xe.exp<ke?(A.dispatch(y()),window.location.href="/login"):A.dispatch(x(xe))}var we=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(k.a,{store:A},r.a.createElement(d.a,null,r.a.createElement(p.b,{exact:!0,path:"/",component:be.Login}),r.a.createElement(p.b,{exact:!0,path:"/login",component:be.Login}),r.a.createElement(p.b,{exact:!0,path:"/signup",component:be.Signup}),r.a.createElement(ye,{exact:!0,path:"/temp",component:be.Temp}),r.a.createElement(ye,{exact:!0,path:"/dashboard",component:be.Dashboard}),r.a.createElement(ye,{exact:!0,path:"/spotify",component:be.Spotify}),r.a.createElement(ye,{exact:!0,path:"/room/:room_code",component:be.Room})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(we,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},28:function(e,t,a){},70:function(e,t,a){e.exports=a.p+"static/media/loading.c27d7664.svg"},74:function(e,t,a){e.exports=a(140)},79:function(e,t,a){}},[[74,1,2]]]);
//# sourceMappingURL=main.06da741e.chunk.js.map